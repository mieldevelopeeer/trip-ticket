import{X as v,r as m,G as N,j as e}from"./app-CzNOCBCP.js";const k=({type:u="success",message:p,onClose:t,duration:o=4e3})=>{const[a,d]=m.useState(!0),[i,l]=m.useState(100);if(m.useEffect(()=>{if(o){const f=100/(o/50),h=setInterval(()=>{l(b=>b<=0?(clearInterval(h),0):b-f)},50),n=setTimeout(()=>{d(!1),setTimeout(t,300)},o);return()=>{clearTimeout(n),clearInterval(h)}}},[o,t]),!a)return null;const r={success:{bg:"bg-emerald-50 border border-emerald-200",text:"text-emerald-800",icon:e.jsx("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),progress:"bg-emerald-500"},error:{bg:"bg-red-50 border border-red-200",text:"text-red-800",icon:e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.502 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})}),progress:"bg-red-500"}},x=r[u]||r.success;return e.jsx("div",{className:"fixed top-6 right-6 z-[1000] animate-slide-in",children:e.jsxs("div",{className:`${x.bg} rounded-sm shadow-lg min-w-[320px] max-w-md overflow-hidden`,children:[e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:x.icon}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:`text-xs font-black uppercase tracking-tighter ${x.text}`,children:p})}),e.jsx("button",{onClick:()=>{d(!1),setTimeout(t,300)},className:"flex-shrink-0 ml-3 p-0.5 rounded-sm hover:bg-black/5 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-3.5 h-3.5 text-gray-400 hover:text-gray-600",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"h-0.5 bg-gray-200",children:e.jsx("div",{className:`h-full ${x.progress} transition-all duration-100 ease-linear`,style:{width:`${i}%`}})})]})})},y=[{value:"",label:"NONE"},{value:"Jr.",label:"JR."},{value:"Sr.",label:"SR."},{value:"II",label:"II"},{value:"III",label:"III"},{value:"IV",label:"IV"},{value:"V",label:"V"}];function I({isOpen:u,onClose:p,driver:t,vehicles:o=[]}){var j;const{flash:a}=v().props,[d,i]=m.useState(null),{data:l,setData:r,patch:x,processing:g,errors:c,reset:f}=N({firstname:"",middlename:"",lastname:"",suffix:"",contact:"",email:"",status:"active",vehicle_id:""});m.useEffect(()=>{u&&(a!=null&&a.success||a!=null&&a.error)&&i({type:a.success?"success":"error",message:a.success||a.error})},[u,a]),m.useEffect(()=>{t&&r({firstname:t.firstname||"",middlename:t.middlename||"",lastname:t.lastname||"",suffix:t.suffix||"",contact:t.contact||"",email:t.email||"",status:t.status||"active",vehicle_id:t.vehicle_id||""})},[t]);const h=s=>{s.preventDefault(),x(route("drivers.update",t.id),{onSuccess:()=>{i({type:"success",message:"DRIVER REGISTRY UPDATED • CHANGES COMMITTED"}),setTimeout(()=>{p(),f(),i(null)},1500)},onError:()=>{i({type:"error",message:"REGISTRY UPDATE FAILED • VERIFY INPUT FIELDS"})},preserveScroll:!0})},n=({message:s})=>s?e.jsx("div",{className:"text-red-600 text-[9px] mt-1 font-black uppercase italic tracking-tighter",children:s}):null,b=()=>{i(null)};return u?e.jsxs(e.Fragment,{children:[d&&e.jsx(k,{type:d.type,message:d.message,onClose:b}),e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-[#1B4332]/90 backdrop-blur-sm p-4",children:e.jsx("div",{className:"bg-white w-full max-w-lg rounded-sm shadow-2xl overflow-hidden border-t-4 border-[#A3C1AD]",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-black text-[#1B4332] uppercase tracking-tighter leading-none",children:"Modify Personnel"}),e.jsxs("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mt-2",children:["REF ID: ",(j=t==null?void 0:t.id)==null?void 0:j.toString().padStart(4,"0")," • REGISTRY UPDATE PROTOCOL"]})]}),e.jsx("button",{onClick:p,className:"text-gray-400 hover:text-red-600 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:["First Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:l.firstname,onChange:s=>r("firstname",s.target.value),className:"w-full border-gray-200 rounded-sm font-bold text-sm focus:ring-[#1B4332] focus:border-[#1B4332] uppercase",required:!0}),e.jsx(n,{message:c.firstname})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:["Last Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:l.lastname,onChange:s=>r("lastname",s.target.value),className:"w-full border-gray-200 rounded-sm font-bold text-sm focus:ring-[#1B4332] focus:border-[#1B4332] uppercase",required:!0}),e.jsx(n,{message:c.lastname})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:["Suffix ",e.jsx("span",{className:"text-gray-400 text-[8px]",children:"(Optional)"})]}),e.jsx("select",{value:l.suffix,onChange:s=>r("suffix",s.target.value),className:"w-full border-gray-200 rounded-sm font-bold text-sm focus:ring-[#1B4332] focus:border-[#1B4332] uppercase bg-gray-50",children:y.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx(n,{message:c.suffix})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:["Middle Name ",e.jsx("span",{className:"text-gray-400 text-[8px]",children:"(Optional)"})]}),e.jsx("input",{type:"text",value:l.middlename,onChange:s=>r("middlename",s.target.value),className:"w-full border-gray-200 rounded-sm font-bold text-sm focus:ring-[#1B4332] focus:border-[#1B4332] uppercase",placeholder:"MIDDLE NAME"}),e.jsx(n,{message:c.middlename})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[e.jsx("label",{className:"block text-[10px] font-black text-[#1B4332] uppercase tracking-widest mb-1",children:"Assigned Unit (Plate & Model)"}),e.jsxs("select",{value:l.vehicle_id,onChange:s=>r("vehicle_id",s.target.value),className:"w-full border-gray-200 rounded-sm font-bold text-sm focus:ring-[#1B4332] focus:border-[#1B4332] uppercase bg-gray-50",children:[e.jsx("option",{value:"",children:"-- UNASSIGNED / NO VEHICLE --"}),o.map(s=>e.jsxs("option",{value:s.id,children:[s.label," ",s.status==="on_trip"?"• [ON TRIP]":"• [AVAILABLE]"]},s.id))]}),e.jsx(n,{message:c.vehicle_id})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:["Contact Number ",e.jsx("span",{className:"text-gray-400 text-[8px]",children:"(Optional)"})]}),e.jsx("input",{type:"text",value:l.contact,onChange:s=>r("contact",s.target.value),className:"w-full border-gray-200 rounded-sm font-mono font-bold text-sm focus:ring-[#1B4332] focus:border-[#1B4332]",placeholder:"09XXXXXXXXX"}),e.jsx(n,{message:c.contact})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:["Status ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{value:l.status,onChange:s=>r("status",s.target.value),className:"w-full border-gray-200 rounded-sm font-bold text-sm focus:ring-[#1B4332] focus:border-[#1B4332] uppercase",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"standby",children:"Standby"}),e.jsx("option",{value:"suspended",children:"Suspended"})]}),e.jsx(n,{message:c.status})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:["Email Address ",e.jsx("span",{className:"text-gray-400 text-[8px]",children:"(Optional)"})]}),e.jsx("input",{type:"email",value:l.email,onChange:s=>r("email",s.target.value),className:"w-full border-gray-200 rounded-sm font-bold text-sm focus:ring-[#1B4332] focus:border-[#1B4332]",placeholder:"operator@example.com"}),e.jsx(n,{message:c.email})]})]}),e.jsx("div",{className:"bg-gray-50 border-l-4 border-gray-300 p-3 mt-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-tight leading-tight",children:["Note: Fields marked with ",e.jsx("span",{className:"text-red-600",children:"*"})," are required. Middle name, suffix, contact, and email are optional fields."]})]})}),e.jsxs("div",{className:"pt-6 flex flex-col space-y-3",children:[e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-[#1B4332] text-[#A3C1AD] py-3.5 rounded-sm font-black uppercase text-[10px] tracking-widest hover:bg-black hover:text-white transition-all shadow-md active:scale-[0.98] disabled:opacity-50",children:g?"SYNCHRONIZING REGISTRY...":"COMMIT CHANGES TO REGISTRY"}),e.jsx("button",{type:"button",onClick:p,className:"w-full text-gray-400 py-2 font-black uppercase text-[9px] tracking-[0.2em] hover:text-gray-600 transition-colors",children:"ABORT PROTOCOL"})]}),g&&e.jsx("div",{className:"border-t border-gray-100 pt-4 mt-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-3 w-3 text-[#1B4332]",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-[8px] font-black text-[#1B4332] uppercase tracking-widest",children:"PROCESSING REGISTRY UPDATE..."})]})})]})]})})})]}):null}export{I as default};
