import{r as x,b as I,j as e,S as fe,A as je}from"./app-CzNOCBCP.js";import{A as ge}from"./AuthenticatedLayout-BrSYted1.js";import ve from"./CreateTripModal-CkfSp6kP.js";import"./transition-DY9qfS6v.js";import"./Modal-Deuc3IVm.js";import"./react-select.esm-ISyukIyw.js";const Ne=({type:i="success",message:L,onClose:g,duration:c=4e3})=>{const[f,v]=x.useState(!0),[n,_]=x.useState(100);if(I.useEffect(()=>{if(c){const t=100/(c/50),p=setInterval(()=>{_(h=>h<=0?(clearInterval(p),0):h-t)},50),l=setTimeout(()=>{v(!1),setTimeout(g,300)},c);return()=>{clearTimeout(l),clearInterval(p)}}},[c,g]),!f)return null;const m={success:{bg:"bg-emerald-50 border border-emerald-200",text:"text-emerald-800",icon:e.jsx("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),progress:"bg-emerald-500"},error:{bg:"bg-red-50 border border-red-200",text:"text-red-800",icon:e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.502 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})}),progress:"bg-red-500"}},j=m[i]||m.success;return e.jsx("div",{className:"fixed top-6 right-6 z-[1000] animate-slide-in",children:e.jsxs("div",{className:`${j.bg} rounded-xl shadow-lg min-w-[320px] max-w-md overflow-hidden`,children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:j.icon}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:`text-sm font-medium ${j.text}`,children:L})}),e.jsx("button",{onClick:()=>{v(!1),setTimeout(g,300)},className:"flex-shrink-0 ml-4 p-1 rounded-lg hover:bg-black/5 transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"h-0.5 bg-gray-200",children:e.jsx("div",{className:`h-full ${j.progress} transition-all duration-100 ease-linear`,style:{width:`${n}%`}})})]})})},we=({trip:i,isOpen:L,onClose:g,onUpdate:c})=>{var t,p;const[f,v]=x.useState((i==null?void 0:i.status)||"booked"),[n,_]=x.useState(""),[m,j]=x.useState(!1),M=async l=>{l.preventDefault(),j(!0);try{await c(i.id,f,n)}catch(h){console.error("Error updating status:",h)}finally{j(!1)}};if(!L||!i)return null;const N=[{value:"booked",label:"Booked",color:"bg-blue-100 text-blue-800"},{value:"on trip",label:"On Trip",color:"bg-emerald-100 text-emerald-800"},{value:"finished",label:"Finished",color:"bg-slate-100 text-slate-800"}];return e.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-700 to-emerald-800 px-6 py-4 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Update Trip Status"}),e.jsxs("p",{className:"text-sm text-emerald-100 mt-1",children:["Ticket: ",i.tickNo||`#${String(i.id).padStart(5,"0")}`]})]}),e.jsx("button",{onClick:g,className:"text-white/80 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:M,className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Current Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`px-3 py-1.5 rounded-lg text-sm font-medium ${((t=N.find(l=>l.value===i.status))==null?void 0:t.color)||"bg-gray-100 text-gray-800"}`,children:((p=N.find(l=>l.value===i.status))==null?void 0:p.label)||i.status}),e.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Update to"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:N.map(l=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${f===l.value?"border-emerald-500 bg-emerald-50":"border-slate-200 hover:border-emerald-300 hover:bg-slate-50"}`,children:[e.jsx("input",{type:"radio",name:"status",value:l.value,checked:f===l.value,onChange:h=>v(h.target.value),className:"w-4 h-4 text-emerald-600 focus:ring-emerald-500 border-slate-300"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-slate-900",children:l.label}),l.value==="finished"&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Vehicle will be marked as available"})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${f===l.value?"bg-emerald-500":"bg-slate-300"}`})]},l.value))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:g,disabled:m,className:"flex-1 px-4 py-2.5 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||f===i.status,className:"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-emerald-600 to-emerald-700 rounded-lg hover:from-emerald-700 hover:to-emerald-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Status"})]})]})]})})};function _e({auth:i,drivers:L,vehicles:g,trips:c=[]}){var G,X,Y,Q,q,J,K;const[f,v]=x.useState(!1),[n,_]=x.useState(""),[m,j]=x.useState("all"),[M,N]=x.useState(null),[t,p]=x.useState(null),[l,h]=x.useState({isOpen:!1,trip:null}),[F,T]=x.useState(null),[de,w]=x.useState(1),S=10,k=c.filter(s=>{var Z,ee,se,te,ae,le,re,ne,ie,oe;const r=((Z=s.driver)==null?void 0:Z.full_name)||"",a=((ee=s.driver)==null?void 0:ee.firstname)||"",b=((se=s.driver)==null?void 0:se.lastname)||"",u=s.passenger||"",y=s.place||"",C=((te=s.vehicle)==null?void 0:te.plate_number)||"",z=((ae=s.vehicle)==null?void 0:ae.model)||"",B=((le=s.vehicle)==null?void 0:le.type)||"",$=((ne=(re=s.vehicle)==null?void 0:re.vehicle_type)==null?void 0:ne.vehicle_type_name)||"",A=((oe=(ie=s.vehicle)==null?void 0:ie.vehicle_type)==null?void 0:oe.category)||"",D=s.purpose||"",W=s.tickNo||"",pe=r.toLowerCase().includes(n.toLowerCase())||a.toLowerCase().includes(n.toLowerCase())||b.toLowerCase().includes(n.toLowerCase())||u.toLowerCase().includes(n.toLowerCase())||y.toLowerCase().includes(n.toLowerCase())||C.toLowerCase().includes(n.toLowerCase())||z.toLowerCase().includes(n.toLowerCase())||B.toLowerCase().includes(n.toLowerCase())||$.toLowerCase().includes(n.toLowerCase())||A.toLowerCase().includes(n.toLowerCase())||D.toLowerCase().includes(n.toLowerCase())||W.toLowerCase().includes(n.toLowerCase()),be=m==="all"||s.status===m;return pe&&be});I.useEffect(()=>{w(1)},[n,m]);const o=Math.max(1,Math.ceil(k.length/S)),d=Math.min(de,o),R=k.slice((d-1)*S,d*S),ce=k.length===0?0:(d-1)*S+1,xe=Math.min(d*S,k.length),O=s=>{const r={booked:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200",dot:"bg-blue-500",animate:!1},"on trip":{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200",dot:"bg-emerald-500",animate:!0},finished:{bg:"bg-slate-50",text:"text-slate-600",border:"border-slate-200",dot:"bg-slate-400",animate:!1}};return r[s]||r.booked},U=s=>{if(!s)return"N/A";const r=new Date(s);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)},V=s=>{if(!s)return"N/A";const r=new Date(s);return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(r)},me=(s,r)=>{if(!s||!r)return null;const a=new Date(s),u=new Date(r)-a,y=Math.floor(u/(1e3*60*60)),C=Math.floor(u%(1e3*60*60)/(1e3*60));return`${y}h ${C}m`},E={total:c.length,booked:c.filter(s=>s.status==="booked").length,on_trip:c.filter(s=>s.status==="on trip").length,finished:c.filter(s=>s.status==="finished").length},he=s=>{N(M===s?null:s)},P=async(s,r,a="")=>{try{const b=await je.patch(route("trips.status",s),{status:r,notes:a},{preserveScroll:!0,onSuccess:()=>{h({isOpen:!1,trip:null}),T({type:"success",message:`Trip status updated to ${r} successfully!`})},onError:u=>{T({type:"error",message:u.error||"Failed to update status. Please try again."})}})}catch{T({type:"error",message:"Failed to update status. Please try again."})}},H=(s,r)=>{r==="start"&&s.status!=="on trip"?P(s.id,"on trip","Trip started"):r==="finish"&&s.status!=="finished"&&P(s.id,"finished","Trip completed")},ue=()=>{T(null)};return e.jsxs(ge,{user:i.user,children:[e.jsx(fe,{title:"Trip Dispatch Management"}),e.jsx("style",{children:`
                @import url('https://fonts.googleapis.com/css2?family=Geist:wght@400;500;600;700;800&family=Geist+Mono:wght@400;500;600;700&display=swap');
                
                * { font-family: 'Geist', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
                .font-mono { font-family: 'Geist Mono', 'SF Mono', 'Monaco', 'Courier New', monospace; }
                
                @keyframes fadeInUp {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                
                @keyframes slideInRight {
                    from { opacity: 0; transform: translateX(-10px); }
                    to { opacity: 1; transform: translateX(0); }
                }

                @keyframes expandRow {
                    from { opacity: 0; max-height: 0; }
                    to { opacity: 1; max-height: 500px; }
                }

                @keyframes slide-in {
                    from { transform: translateX(120%); opacity: 0; }
                    to   { transform: translateX(0);    opacity: 1; }
                }
                
                .animate-fade-in-up { animation: fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
                .animate-slide-in-right { animation: slideInRight 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
                .animate-expand-row { animation: expandRow 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
                .animate-slide-in { animation: slide-in 0.4s ease-out; }
                
                .stagger-1 { animation-delay: 0.05s; }
                .stagger-2 { animation-delay: 0.1s; }
                .stagger-3 { animation-delay: 0.15s; }
                .stagger-4 { animation-delay: 0.2s; }

                .table-row-hover {
                    transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
                }

                .table-row-hover:hover {
                    background: linear-gradient(to right, rgba(16, 185, 129, 0.03), rgba(16, 185, 129, 0));
                    transform: translateX(2px);
                }

                .expanded-row {
                    background: linear-gradient(to right, rgba(16, 185, 129, 0.05), rgba(16, 185, 129, 0.02));
                }
            `}),F&&e.jsx(Ne,{type:F.type,message:F.message,onClose:ue}),l.isOpen&&l.trip&&e.jsx(we,{trip:l.trip,isOpen:l.isOpen,onClose:()=>h({isOpen:!1,trip:null}),onUpdate:P}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:e.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8 animate-fade-in-up",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight mb-2",children:"Trip Dispatch Management"}),e.jsx("p",{className:"text-sm text-slate-600 font-medium",children:"Monitor and authorize vehicle dispatch operations"})]}),e.jsxs("div",{className:"hidden lg:flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900",children:E.total}),e.jsx("div",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider",children:"Total Trips"})]}),e.jsx("div",{className:"w-px h-12 bg-slate-200"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:E.on_trip}),e.jsx("div",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider",children:"Active"})]}),e.jsx("div",{className:"w-px h-12 bg-slate-200"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-600",children:E.finished}),e.jsx("div",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider",children:"Completed"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 mb-6 shadow-sm animate-fade-in-up stagger-1",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end gap-6",children:[e.jsxs("div",{className:"flex-1 max-w-lg",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wider mb-2.5",children:"Search Trips"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-emerald-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 1115 0 7 7 0 0115 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search by ticket, driver, vehicle, destination...",className:"w-full pl-12 pr-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent focus:bg-white transition-all",value:n,onChange:s=>_(s.target.value)})]})]}),e.jsxs("div",{className:"w-full lg:w-56",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wider mb-2.5",children:"Status Filter"}),e.jsxs("select",{value:m,onChange:s=>j(s.target.value),className:"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl text-sm font-semibold text-slate-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all cursor-pointer hover:bg-slate-100",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"booked",children:"Booked"}),e.jsx("option",{value:"on trip",children:"On Trip"}),e.jsx("option",{value:"finished",children:"Finished"})]})]}),e.jsx("div",{className:"w-full lg:w-auto",children:e.jsxs("button",{onClick:()=>v(!0),className:"group w-full lg:w-auto bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white px-7 py-3.5 rounded-xl font-bold text-sm shadow-lg shadow-emerald-900/20 hover:shadow-xl hover:shadow-emerald-900/30 transition-all duration-200 active:scale-[0.98] flex items-center justify-center gap-2.5",children:[e.jsx("svg",{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{children:"Authorize New Trip"})]})})]})}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden animate-fade-in-up stagger-2",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-slate-50 to-slate-100 border-b border-slate-200",children:[e.jsx("th",{className:"px-6 py-4 text-left w-12"}),e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsx("span",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Ticket No"})}),e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsx("span",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Driver"})}),e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsx("span",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Passenger"})}),e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsx("span",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Vehicle"})}),e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsx("span",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Destination"})}),e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsx("span",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Status"})}),e.jsx("th",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Actions"})})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:R.length>0?R.map((s,r)=>{var u,y,C,z,B,$,A,D,W;const a=O(s.status||"booked"),b=M===s.id;return e.jsxs(I.Fragment,{children:[e.jsxs("tr",{className:`table-row-hover group animate-slide-in-right ${b?"expanded-row":""}`,style:{animationDelay:`${Math.min(r*.05,.3)}s`},children:[e.jsx("td",{className:"px-5 py-3.5",children:e.jsx("button",{onClick:()=>he(s.id),className:"text-slate-400 hover:text-emerald-600 transition-colors focus:outline-none",children:e.jsx("svg",{className:`w-5 h-5 transition-transform duration-200 ${b?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})}),e.jsx("td",{className:"px-5 py-3.5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1 h-9 bg-gradient-to-b from-emerald-500 to-emerald-600 rounded-full flex-shrink-0 shadow-sm"}),e.jsx("span",{className:"font-mono text-sm font-bold text-slate-900 tracking-tight",children:s.tickNo||`#${String(s.id).padStart(5,"0")}`})]})}),e.jsx("td",{className:"px-5 py-3.5",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-lg flex items-center justify-center ring-1 ring-emerald-200/50",children:e.jsx("svg",{className:"w-4 h-4 text-emerald-700",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-slate-900 leading-tight",children:[((u=s.driver)==null?void 0:u.lastname)||"N/A",", ",((y=s.driver)==null?void 0:y.firstname)||""," ",(C=s.driver)==null?void 0:C.suffix]}),((z=s.driver)==null?void 0:z.license_number)&&e.jsxs("p",{className:"text-xs text-slate-500 font-mono mt-0.5 tracking-tight",children:["Lic: ",s.driver.license_number]})]})]})}),e.jsx("td",{className:"px-5 py-3.5",children:e.jsx("div",{className:"flex items-center gap-2",children:s.passenger?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-shrink-0 w-7 h-7 bg-slate-50 rounded-lg flex items-center justify-center ring-1 ring-slate-200/50",children:e.jsx("svg",{className:"w-3.5 h-3.5 text-slate-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("p",{className:"text-sm font-medium text-slate-700 truncate max-w-[140px]",title:s.passenger,children:s.passenger})]}):e.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"—"})})}),e.jsx("td",{className:"px-5 py-3.5",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-mono font-bold text-slate-900 tracking-tight",children:((B=s.vehicle)==null?void 0:B.plate_number)||"N/A"}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 text-xs",children:[((A=($=s.vehicle)==null?void 0:$.vehicle_type)==null?void 0:A.vehicle_type_name)&&e.jsx("span",{className:"text-slate-600 font-medium",children:s.vehicle.vehicle_type.vehicle_type_name}),((W=(D=s.vehicle)==null?void 0:D.vehicle_type)==null?void 0:W.category)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-slate-400",children:"•"}),e.jsx("span",{className:"text-slate-500",children:s.vehicle.vehicle_type.category})]})]})]})}),e.jsx("td",{className:"px-5 py-3.5",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-sm font-medium text-slate-800 truncate max-w-[160px]",title:s.place||"N/A",children:s.place||"N/A"})]})}),e.jsx("td",{className:"px-5 py-3.5",children:e.jsxs("button",{onClick:()=>h({isOpen:!0,trip:s}),className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-bold border shadow-sm transition-all hover:shadow-md hover:-translate-y-0.5 ${a.bg} ${a.text} ${a.border}`,title:"Click to update status",children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${a.dot} ${a.animate?"animate-pulse":""}`}),(s.status||"booked").toUpperCase()]})}),e.jsx("td",{className:"px-5 py-3.5",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.status!=="on trip"&&s.status!=="finished"&&e.jsx("button",{onClick:()=>H(s,"start"),className:"text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 p-1.5 rounded-lg transition-colors",title:"Start Trip",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),s.status==="on trip"&&e.jsx("button",{onClick:()=>H(s,"finish"),className:"text-slate-600 hover:text-slate-700 hover:bg-slate-50 p-1.5 rounded-lg transition-colors",title:"Finish Trip",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>p(s),className:"text-slate-400 hover:text-emerald-600 hover:bg-slate-50 p-1.5 rounded-lg transition-colors",title:"View Details",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{onClick:()=>h({isOpen:!0,trip:s}),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 p-1.5 rounded-lg transition-colors",title:"Update Status",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})})]}),b&&e.jsx("tr",{className:"animate-expand-row",children:e.jsx("td",{colSpan:"8",className:"px-6 py-6 bg-gradient-to-r from-slate-50/50 to-white border-b border-slate-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ml-12",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h4",{className:"font-bold text-slate-900 text-sm",children:"Time Details"})]}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-medium mb-1",children:"Created"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:U(s.created_at)})]}),s.trip_start&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-medium mb-1",children:"Trip Start"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:V(s.trip_start)})]}),s.trip_end&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-medium mb-1",children:"Trip End"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:V(s.trip_end)})]}),s.trip_start&&s.trip_end&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-medium mb-1",children:"Duration"}),e.jsx("p",{className:"text-sm font-semibold text-emerald-600",children:me(s.trip_start,s.trip_end)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("svg",{className:"w-5 h-5 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h4",{className:"font-bold text-slate-900 text-sm",children:"Trip Information"})]}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-medium mb-1",children:"Project Charge"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-lg text-xs font-mono font-bold bg-violet-50 text-violet-700 border border-violet-200",children:s.chargetoproject||"GENERAL"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-medium mb-1",children:"Purpose"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 leading-relaxed",children:s.purpose||"Not specified"})]})]})]}),(s.fuel_type||s.liters)&&e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"})]}),e.jsx("h4",{className:"font-bold text-slate-900 text-sm",children:"Fuel Details"})]}),e.jsxs("div",{className:"space-y-2.5",children:[s.fuel_type&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-medium mb-1",children:"Fuel Type"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 uppercase",children:s.fuel_type})]}),s.liters&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-medium mb-1",children:"Liters"}),e.jsxs("p",{className:"text-sm font-semibold text-orange-600",children:[s.liters," L"]})]})]})]})]})})})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-20 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-2xl flex items-center justify-center mb-5",children:e.jsx("svg",{className:"w-10 h-10 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),e.jsx("p",{className:"text-slate-900 font-bold text-base mb-2",children:"No trips found"}),e.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Try adjusting your search criteria or filters"})]})})})})]})}),k.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 border-t border-slate-200 px-6 py-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-slate-600 font-medium",children:"Showing"}),e.jsxs("span",{className:"font-bold text-slate-900 bg-white px-2.5 py-0.5 rounded-md border border-slate-200",children:[ce,"–",xe]}),e.jsx("span",{className:"text-slate-600 font-medium",children:"of"}),e.jsx("span",{className:"font-bold text-slate-900 bg-white px-2.5 py-0.5 rounded-md border border-slate-200",children:k.length}),e.jsx("span",{className:"text-slate-600 font-medium",children:"trips"})]}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Dispatch Log Verified"})]})]}),o>1&&e.jsxs("div",{className:"flex items-center justify-center gap-1.5 mt-4 pt-4 border-t border-slate-200",children:[e.jsx("button",{onClick:()=>w(1),disabled:d===1,className:"p-1.5 rounded-lg text-slate-500 hover:text-emerald-700 hover:bg-white border border-transparent hover:border-slate-200 hover:shadow-sm transition-all disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:border-transparent disabled:hover:shadow-none",title:"First page",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),e.jsx("button",{onClick:()=>w(s=>Math.max(1,s-1)),disabled:d===1,className:"p-1.5 rounded-lg text-slate-500 hover:text-emerald-700 hover:bg-white border border-transparent hover:border-slate-200 hover:shadow-sm transition-all disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:border-transparent disabled:hover:shadow-none",title:"Previous page",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 19l-7-7 7-7"})})}),(()=>{const s=[];if(o<=7)for(let a=1;a<=o;a++)s.push(a);else d<=3?s.push(1,2,3,"...",o):d>=o-2?s.push(1,"...",o-2,o-1,o):s.push(1,"...",d-1,d,d+1,"...",o);return s.map((a,b)=>{if(a==="...")return e.jsx("span",{className:"w-8 text-center text-slate-400 text-sm font-medium",children:"···"},`ellipsis-${b}`);const u=a===d;return e.jsx("button",{onClick:()=>w(a),className:`w-8 h-8 rounded-lg text-sm font-bold transition-all ${u?"bg-gradient-to-br from-emerald-600 to-emerald-700 text-white shadow-md shadow-emerald-900/20 border border-emerald-600":"text-slate-600 hover:text-emerald-700 hover:bg-white border border-transparent hover:border-slate-200 hover:shadow-sm"}`,children:a},a)})})(),e.jsx("button",{onClick:()=>w(s=>Math.min(o,s+1)),disabled:d===o,className:"p-1.5 rounded-lg text-slate-500 hover:text-emerald-700 hover:bg-white border border-transparent hover:border-slate-200 hover:shadow-sm transition-all disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:border-transparent disabled:hover:shadow-none",title:"Next page",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9 5l7 7-7 7"})})}),e.jsx("button",{onClick:()=>w(o),disabled:d===o,className:"p-1.5 rounded-lg text-slate-500 hover:text-emerald-700 hover:bg-white border border-transparent hover:border-slate-200 hover:shadow-sm transition-all disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:border-transparent disabled:hover:shadow-none",title:"Last page",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9 5l7 7-7 7M5 5l7 7-7 7"})})})]})]})]})]})}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:()=>p(null),children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[85vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"bg-emerald-950 px-6 py-4 flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Trip #",String(t.tickNo||t.id).padStart(4,"0")]})}),e.jsx("button",{onClick:()=>p(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(85vh-140px)]",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Driver"}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:((G=t.driver)==null?void 0:G.full_name)||"N/A"}),((X=t.driver)==null?void 0:X.license_number)&&e.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:t.driver.license_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Passenger"}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:t.passenger||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Vehicle"}),e.jsx("p",{className:"text-sm font-mono font-bold text-slate-900",children:((Y=t.vehicle)==null?void 0:Y.plate_number)||"N/A"}),e.jsxs("p",{className:"text-xs text-slate-600 mt-0.5",children:[((q=(Q=t.vehicle)==null?void 0:Q.vehicle_type)==null?void 0:q.vehicle_type_name)||"—",((K=(J=t.vehicle)==null?void 0:J.vehicle_type)==null?void 0:K.category)&&` • ${t.vehicle.vehicle_type.category}`]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Status"}),(()=>{const s=O(t.status||"booked");return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded text-xs font-semibold ${s.bg} ${s.text}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-1.5 ${s.dot} ${s.animate?"animate-pulse":""}`}),(t.status||"booked").toUpperCase()]})})()]})]}),e.jsx("div",{className:"border-t border-slate-200 my-6"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Destination"}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:t.place||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Project"}),e.jsx("p",{className:"text-sm font-mono font-medium text-slate-900",children:t.chargetoproject||"GENERAL"})]}),e.jsxs("div",{className:"col-span-full",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Purpose"}),e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:t.purpose||"Not specified"})]})]}),(t.trip_start||t.trip_end||t.fuel_type||t.liters)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-slate-200 my-6"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[t.trip_start&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Start"}),e.jsx("p",{className:"text-xs text-slate-700",children:U(t.trip_start)})]}),t.trip_end&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"End"}),e.jsx("p",{className:"text-xs text-slate-700",children:U(t.trip_end)})]}),t.fuel_type&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Fuel Type"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 uppercase",children:t.fuel_type})]}),t.liters&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Liters"}),e.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[t.liters," L"]})]})]})]})]})}),e.jsx("div",{className:"bg-slate-50 px-6 py-3 border-t border-slate-200 flex justify-end",children:e.jsx("button",{onClick:()=>p(null),className:"px-4 py-2 text-sm font-medium text-slate-700 hover:text-slate-900 transition-colors",children:"Close"})})]})}),e.jsx(ve,{show:f,onClose:()=>v(!1),drivers:L,vehicles:g,trips:c})]})}export{_e as default};
