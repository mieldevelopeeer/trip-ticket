import{r as i,G as B,c as I,j as e}from"./app-CzNOCBCP.js";import{S as $}from"./react-select.esm-ISyukIyw.js";function X({isOpen:o,onClose:n}){const[j,N]=i.useState([]),[p,d]=i.useState(!1),[c,f]=i.useState({show:!1,message:"",type:""}),[b,h]=i.useState(!1),y=[{value:"",label:"None"},{value:"Jr.",label:"Jr."},{value:"Sr.",label:"Sr."},{value:"II",label:"II"},{value:"III",label:"III"},{value:"IV",label:"IV"},{value:"V",label:"V"}],{data:a,setData:l,post:w,processing:u,errors:t,reset:m,clearErrors:x}=B({firstname:"",middlename:"",lastname:"",suffix:"",address:"",contact:"",email:"",status:"active",vehicle_id:null});if(i.useEffect(()=>{o?(setTimeout(()=>h(!0),10),d(!0),I.get(route("drivers.fetch-plates")).then(s=>{N(s.data),d(!1)}).catch(s=>{console.error("Protocol Error: Vehicle list unavailable",s),d(!1)})):h(!1)},[o]),!o)return null;const g=j.map(s=>({value:s.id,label:`${s.plate_number} ${s.model?`(${s.model})`:""}`})),k={control:(s,r)=>({...s,borderRadius:"0.75rem",borderColor:r.isFocused?"#1B4332":"#E2E8F0",borderWidth:"1px",fontSize:"14px",fontWeight:"500",minHeight:"42px",boxShadow:"none","&:hover":{borderColor:"#1B4332"}}),placeholder:s=>({...s,color:"#94A3B8",fontSize:"14px"}),singleValue:s=>({...s,color:"#1E293B"})},S={control:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-[#1B4332] focus:border-transparent transition-all cursor-pointer"},v=(s,r)=>{f({show:!0,message:s,type:r}),setTimeout(()=>f({show:!1,message:"",type:""}),3e3)},C=s=>{s.preventDefault(),w(route("drivers.store"),{preserveScroll:!0,onSuccess:()=>{v("Driver Registered Successfully","success"),setTimeout(()=>{m(),x(),n()},1e3)},onError:r=>{console.error("Submission failed:",r),v("Registration Failed","error")}})};return e.jsx("div",{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 transition-all duration-500 ease-out ${b?"bg-black/50 backdrop-blur-sm":"bg-transparent backdrop-blur-0"}`,children:e.jsxs("div",{className:`bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden relative transition-all duration-500 transform ${b?"translate-y-0 opacity-100 scale-100":"translate-y-8 opacity-0 scale-95"}`,children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 py-3 text-center text-sm font-semibold z-50 transition-all duration-300 transform ${c.show?"translate-y-0 opacity-100":"-translate-y-full opacity-0"} ${c.type==="success"?"bg-emerald-500 text-white":"bg-red-500 text-white"}`,children:c.message}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Register Driver"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Add new driver to the system"})]}),e.jsx("button",{onClick:()=>{m(),x(),n()},className:"text-slate-400 hover:text-red-600 transition-colors focus:outline-none",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:C,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs("label",{className:"block text-xs font-semibold text-slate-600 uppercase tracking-wider mb-2",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.firstname,onChange:s=>l("firstname",s.target.value),className:`w-full px-4 py-2.5 border rounded-xl text-sm font-medium focus:ring-2 focus:ring-[#1B4332] focus:border-transparent transition-all ${t.firstname?"border-red-500":"border-slate-200"}`,placeholder:"Juan",required:!0}),t.firstname&&e.jsx("p",{className:"text-red-500 text-xs mt-1 font-medium",children:t.firstname})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Middle Name"}),e.jsx("input",{type:"text",value:a.middlename,onChange:s=>l("middlename",s.target.value),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-[#1B4332] focus:border-transparent transition-all",placeholder:"Santos"})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs("label",{className:"block text-xs font-semibold text-slate-600 uppercase tracking-wider mb-2",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.lastname,onChange:s=>l("lastname",s.target.value),className:`w-full px-4 py-2.5 border rounded-xl text-sm font-medium focus:ring-2 focus:ring-[#1B4332] focus:border-transparent transition-all ${t.lastname?"border-red-500":"border-slate-200"}`,placeholder:"Dela Cruz",required:!0}),t.lastname&&e.jsx("p",{className:"text-red-500 text-xs mt-1 font-medium",children:t.lastname})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Suffix"}),e.jsx("select",{value:a.suffix,onChange:s=>l("suffix",s.target.value),className:S.control,children:y.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),t.suffix&&e.jsx("p",{className:"text-red-500 text-xs mt-1 font-medium",children:t.suffix})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Assigned Vehicle"}),e.jsx($,{options:g,isClearable:!0,isSearchable:!0,isLoading:p,placeholder:p?"Loading vehicles...":"Select vehicle...",styles:k,value:g.find(s=>s.value===a.vehicle_id)||null,onChange:s=>l("vehicle_id",s?s.value:null)}),t.vehicle_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1 font-medium",children:t.vehicle_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-semibold text-slate-600 uppercase tracking-wider mb-2",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:a.status,onChange:s=>l("status",s.target.value),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-[#1B4332] focus:border-transparent transition-all cursor-pointer",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"standby",children:"Standby"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Contact Number"}),e.jsx("input",{type:"text",value:a.contact,onChange:s=>l("contact",s.target.value),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-[#1B4332] focus:border-transparent transition-all",placeholder:"09XXXXXXXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:a.email,onChange:s=>l("email",s.target.value),className:`w-full px-4 py-2.5 border rounded-xl text-sm font-medium focus:ring-2 focus:ring-[#1B4332] focus:border-transparent transition-all ${t.email?"border-red-500":"border-slate-200"}`,placeholder:"driver@example.com"}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1 font-medium",children:t.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Residential Address"}),e.jsx("input",{type:"text",value:a.address,onChange:s=>l("address",s.target.value),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-[#1B4332] focus:border-transparent transition-all",placeholder:"Street, Barangay, City"})]}),e.jsxs("div",{className:"pt-4 flex flex-col space-y-3",children:[e.jsxs("button",{type:"submit",disabled:u,className:"relative w-full bg-[#1B4332] hover:bg-[#2d5a45] text-white py-3.5 rounded-xl font-semibold text-sm transition-all shadow-lg hover:shadow-xl active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:u?"opacity-0":"opacity-100",children:"Register Driver"}),u&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}),e.jsx("button",{type:"button",onClick:()=>{m(),x(),n()},className:"w-full text-slate-500 hover:text-slate-700 py-2 font-medium text-sm transition-colors",children:"Cancel"})]})]})]})]})})}export{X as default};
