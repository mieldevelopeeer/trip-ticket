import{r,X as k,G as C,j as e}from"./app-CzNOCBCP.js";function E({title:a,titleId:l,...s},t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},s),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const M=r.forwardRef(E);function L({title:a,titleId:l,...s},t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},s),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const f=r.forwardRef(L);function S({title:a,titleId:l,...s},t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},s),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const v=r.forwardRef(S),D=({type:a="success",message:l,onClose:s,duration:t=4e3})=>{const[o,c]=r.useState(!0),[n,m]=r.useState(100);if(r.useEffect(()=>{if(t){const d=100/(t/50),h=setInterval(()=>{m(p=>p<=0?(clearInterval(h),0):p-d)},50),b=setTimeout(()=>{c(!1),setTimeout(s,300)},t);return()=>{clearTimeout(b),clearInterval(h)}}},[t,s]),!o)return null;const u={success:{bg:"bg-emerald-50 border border-emerald-200",text:"text-emerald-800",icon:e.jsx(M,{className:"w-5 h-5 text-emerald-600"}),progress:"bg-emerald-500"},error:{bg:"bg-red-50 border border-red-200",text:"text-red-800",icon:e.jsx(f,{className:"w-5 h-5 text-red-600"}),progress:"bg-red-500"}},x=u[a]||u.success;return e.jsx("div",{className:"fixed top-6 right-6 z-[60] animate-slide-in",children:e.jsxs("div",{className:`${x.bg} rounded-xl shadow-lg min-w-[320px] max-w-md overflow-hidden backdrop-blur-sm`,children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:x.icon}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:`text-sm font-medium ${x.text}`,children:l})}),e.jsx("button",{onClick:()=>{c(!1),setTimeout(s,300)},className:"flex-shrink-0 ml-4 p-1 rounded-lg hover:bg-black/5 transition-colors",children:e.jsx(v,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})})]})}),e.jsx("div",{className:"h-0.5 bg-gray-200",children:e.jsx("div",{className:`h-full ${x.progress} transition-all duration-100 ease-linear`,style:{width:`${n}%`}})})]})})};function F({isOpen:a,onClose:l,department:s=null}){const{flash:t}=k().props,o=!!s,[c,n]=r.useState(null),{data:m,setData:u,post:x,patch:j,processing:g,errors:d,reset:h,clearErrors:b}=C({code:"",name:""});r.useEffect(()=>{a&&(t!=null&&t.success||t!=null&&t.error)&&(n({type:t.success?"success":"error",message:t.success||t.error}),router.get(route("departments.index"),{},{preserveState:!0,preserveScroll:!0,only:[]}))},[a,t]),r.useEffect(()=>{if(a)if(b(),s){const i=s.code?s.code.toString().padStart(3,"0"):"";u({code:i,name:s.name})}else h()},[a,s]);const p=i=>{i.preventDefault(),o?j(route("departments.update",s.id),{preserveScroll:!0,onSuccess:()=>{n({type:"success",message:"Department updated successfully!"}),setTimeout(()=>{l(),h(),n(null)},1500)},onError:()=>{n({type:"error",message:"Failed to update department. Please check the form."})}}):x(route("departments.store"),{preserveScroll:!0,onSuccess:()=>{n({type:"success",message:"Department created successfully!"}),setTimeout(()=>{l(),h(),n(null)},1500)},onError:()=>{n({type:"error",message:"Failed to create department. Please check the form."})}})},w=i=>{i.target===i.currentTarget&&l()},y=()=>{n(null)};return a?e.jsxs(e.Fragment,{children:[c&&e.jsx(D,{type:c.type,message:c.message,onClose:y}),e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity backdrop-blur-sm",onClick:w}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center sm:p-0",children:e.jsxs("div",{className:"relative transform overflow-hidden rounded-xl bg-white text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-lg border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-r px-6 py-4 from-emerald-800 to-emerald-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:o?e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}):e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white tracking-wide",id:"modal-title",children:o?"Edit Department":"Add New Department"}),e.jsx("p",{className:"text-sm text-white/80 mt-0.5",children:o?"Update department details":"Create a new department record"})]})]}),e.jsxs("button",{type:"button",onClick:l,className:"rounded-full p-1 text-white/80 hover:bg-white/20 hover:text-white transition-all focus:outline-none focus:ring-2 focus:ring-white",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(v,{className:"h-6 w-6"})]})]})}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"px-6 py-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"code",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Department Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"code",value:m.code,onChange:i=>{const N=i.target.value.replace(/\D/g,"").slice(0,3);u("code",N)},className:`w-full px-4 py-3 border rounded-lg font-mono text-lg tracking-widest placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${d.code?"border-red-300 bg-red-50 text-red-900 focus:ring-red-500":"border-gray-300 text-gray-900 focus:ring-emerald-600 focus:border-emerald-600"}`,placeholder:"001",maxLength:3,inputMode:"numeric",pattern:"[0-9]{3}",required:!0,autoFocus:!o}),e.jsxs("div",{className:`absolute right-3 top-3.5 text-xs font-mono ${m.code.length===3?"text-emerald-600":"text-gray-400"}`,children:[m.code.length,"/3"]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Must be exactly 3 digits (e.g., 001, 002, 999)"}),d.code&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4 flex-shrink-0"}),d.code]})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Department Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",value:m.name,onChange:i=>u("name",i.target.value),className:`w-full px-4 py-3 border rounded-lg text-base focus:outline-none focus:ring-2 transition-all ${d.name?"border-red-300 bg-red-50 text-red-900 focus:ring-red-500":"border-gray-300 text-gray-900 focus:ring-emerald-600 focus:border-emerald-600"}`,placeholder:"e.g., Human Resources Department",required:!0}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Full official name of the department"}),d.name&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4 flex-shrink-0"}),d.name]})})]}),e.jsx("div",{className:`border rounded-lg p-4 ${o?"bg-amber-50 border-amber-200":"bg-blue-50 border-blue-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[o?e.jsx(f,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}):e.jsx("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:`text-sm ${o?"text-amber-800":"text-blue-800"}`,children:[e.jsx("p",{className:"font-semibold mb-1",children:o?"Important Note:":"Guidelines:"}),e.jsx("p",{children:o?"Changing department information may affect related records. Ensure all changes are accurate.":"Department codes are unique identifiers. Choose a code that follows your organization's numbering system."})]})]})})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 border-t border-gray-200 rounded-b-xl",children:[e.jsx("button",{type:"button",onClick:l,disabled:g,className:"px-4 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2.5 text-sm font-medium text-white bg-emerald-800 hover:bg-emerald-900 border border-emerald-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-sm",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:o?"Updating...":"Creating..."})]}):e.jsxs(e.Fragment,{children:[o?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:o?"Update Department":"Create Department"})]})})]})]})]})})]})]}):null}const z=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{F as D,v as F,z as a};
