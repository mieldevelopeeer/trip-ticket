import{r as b,G as k,j as e}from"./app-CzNOCBCP.js";function C({isOpen:d,onClose:u,vehicle:a,vehicleTypes:y=[]}){const[p,g]=b.useState({show:!1,message:"",type:""}),[f,h]=b.useState(!1),{data:l,setData:n,post:v,patch:j,processing:m,errors:o,reset:x}=k({vehicle_type_name:"",category:"",plate_numbers:[""],status:"available",quantity:1});b.useEffect(()=>{var t,s,r,i;d?(setTimeout(()=>h(!0),10),a?n({vehicle_type_name:((t=a.vehicle_type)==null?void 0:t.vehicle_type_name)||((s=a.type)==null?void 0:s.vehicle_type_name)||"",category:((r=a.vehicle_type)==null?void 0:r.category)||((i=a.type)==null?void 0:i.category)||"",plate_numbers:[a.plate_number],status:a.status||"available",quantity:1}):x()):h(!1)},[d,a]);const N=t=>{if(a)return;const s=Math.max(1,parseInt(t)||1);let r=[...l.plate_numbers];if(s>r.length){const i=s-r.length;r=[...r,...Array(i).fill("")]}else r=r.slice(0,s);n(i=>({...i,quantity:s,plate_numbers:r}))},w=(t,s)=>{const r=[...l.plate_numbers];r[t]=s.toUpperCase(),n("plate_numbers",r)};if(!d)return null;const c=(t,s)=>{g({show:!0,message:t,type:s}),setTimeout(()=>g({show:!1,message:"",type:""}),3e3)},_=t=>{t.preventDefault(),a?j(route("vehicles.update",a.id),{onSuccess:()=>{c("Asset Updated Successfully","success"),setTimeout(()=>{x(),u()},1e3)},onError:()=>c("Update Failed","error")}):v(route("vehicles.store"),{onSuccess:()=>{c("Batch Registered Successfully","success"),setTimeout(()=>{x(),u()},1e3)},onError:()=>c("Registration Failed","error")})};return e.jsx("div",{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 transition-all duration-500 ease-out ${f?"bg-[#1B4332]/90 backdrop-blur-sm":"bg-transparent backdrop-blur-0"}`,children:e.jsxs("div",{className:`bg-white w-full max-w-md rounded-sm shadow-2xl overflow-hidden border-t-4 border-[#A3C1AD] relative transition-all duration-500 transform ${f?"translate-y-0 opacity-100 scale-100":"translate-y-8 opacity-0 scale-95"}`,children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 py-3 text-center text-[10px] font-black uppercase tracking-widest z-50 transition-all duration-300 transform ${p.show?"translate-y-0 opacity-100":"-translate-y-full opacity-0"} ${p.type==="success"?"bg-emerald-500 text-white":"bg-red-500 text-white"}`,children:p.message}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-black text-[#1B4332] uppercase tracking-tighter leading-none",children:a?"Modify Asset":"Bulk Registration"}),e.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mt-2",children:a?`Editing Plate: ${a.plate_number}`:"Fleet Management • Opol Hub"})]}),e.jsx("button",{onClick:u,className:"text-gray-300 hover:text-red-600 transition-all hover:rotate-90",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Model / Type"}),e.jsx("input",{list:"vehicle-models",type:"text",value:l.vehicle_type_name,onChange:t=>n("vehicle_type_name",t.target.value),className:"w-full border-gray-200 rounded-sm font-bold text-sm focus:ring-2 focus:ring-[#1B4332] uppercase",placeholder:"E.G. HILUX",required:!0}),e.jsx("datalist",{id:"vehicle-models",children:y.map(t=>e.jsx("option",{value:t.vehicle_type_name},t.id))}),o.vehicle_type_name&&e.jsx("div",{className:"text-red-500 text-[9px] font-bold mt-1 uppercase",children:o.vehicle_type_name})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Category"}),e.jsx("input",{type:"text",value:l.category,onChange:t=>n("category",t.target.value),className:"w-full border-gray-200 rounded-sm font-bold text-sm focus:ring-2 focus:ring-[#1B4332] uppercase",placeholder:"SUV / TRUCK",required:!0}),o.category&&e.jsx("div",{className:"text-red-500 text-[9px] font-bold mt-1 uppercase",children:o.category})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Qty"}),e.jsx("input",{type:"number",value:l.quantity,onChange:t=>N(t.target.value),disabled:!!a,className:`w-full border-gray-200 rounded-sm font-bold text-sm focus:ring-2 focus:ring-[#1B4332] ${a?"bg-gray-50 text-gray-400 cursor-not-allowed":""}`,required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Status"}),e.jsxs("select",{value:l.status,onChange:t=>n("status",t.target.value),className:"w-full border-gray-200 rounded-sm font-bold text-sm focus:ring-2 focus:ring-[#1B4332] uppercase cursor-pointer",children:[e.jsx("option",{value:"available",className:"text-emerald-600 font-bold",children:"● Available"}),e.jsx("option",{value:"on_trip",className:"text-blue-600 font-bold",children:"● On Active Trip"}),e.jsx("option",{value:"maintenance",className:"text-orange-600 font-bold",children:"● Maintenance"}),e.jsx("option",{value:"unavailable",className:"text-red-600 font-bold",children:"● Unavailable"})]})]})]}),e.jsxs("div",{className:"group border-t border-gray-100 pt-4",children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:a?"Plate Number":`Assign Plate Numbers (${l.plate_numbers.length})`}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2 pr-2 custom-scrollbar",children:l.plate_numbers.map((t,s)=>e.jsxs("div",{className:"flex items-center space-x-2 animate-in fade-in slide-in-from-left-2",children:[e.jsxs("span",{className:"text-[10px] font-bold text-gray-300 w-6",children:["#",s+1]}),e.jsx("input",{type:"text",value:t,onChange:r=>w(s,r.target.value),className:"flex-1 border-gray-200 rounded-sm font-mono font-bold text-sm focus:ring-2 focus:ring-[#A3C1AD] uppercase placeholder:text-gray-200",placeholder:"PLATE NO.",required:!0})]},s))}),Object.keys(o).map(t=>t.startsWith("plate_numbers")?e.jsx("div",{className:"text-red-500 text-[9px] mt-1 font-bold uppercase",children:o[t]},t):null)]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{type:"submit",disabled:m,className:"relative w-full bg-[#1B4332] text-[#A3C1AD] py-4 rounded-sm font-black uppercase text-[10px] tracking-widest hover:bg-black hover:text-white transition-all shadow-lg active:scale-95 disabled:opacity-70",children:[e.jsx("span",{className:m?"opacity-0":"opacity-100",children:a?"Confirm Update":`Register ${l.quantity} Fleet Unit(s)`}),m&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-5 h-5 border-2 border-[#A3C1AD] border-t-transparent rounded-full animate-spin"})})]})})]})]})]})})}export{C as default};
